<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Device Detector</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .device-card {
      border-radius: 1rem;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .device-label {
      font-weight: bold;
      color: #555;
    }
    .device-value {
      color: #222;
    }
  </style>
</head>
<body class="bg-light">

<div class="container my-5">
  <h3 class="mb-4 text-center">üåê Device Detection Demo</h3>

  <!-- 1. Hi·ªÉn th·ªã user-agent -->
  <div class="alert alert-secondary">
    <strong>Current User-Agent:</strong> <span id="currentUA"></span>
  </div>

  <div class="row">
    <!-- B√™n tr√°i: tra c·ª©u -->
    <div class="col-md-5">
      <div class="card p-3 mb-3">
        <h5>üîç Device Lookup</h5>
        <div class="mb-3">
          <label for="uaInput" class="form-label">User-Agent String</label>
          <textarea id="uaInput" class="form-control" rows="4"></textarea>
        </div>
        <button class="btn btn-primary w-100" onclick="detectDevice()">Detect Device</button>
      </div>

      <div class="card p-3">
        <input type="text" class="form-control mb-3" placeholder="Search history..." id="searchBox">
        <ul class="list-group" id="historyList">
          <!-- Add past lookups here -->
        </ul>
      </div>
    </div>

    <!-- B√™n ph·∫£i: Card info -->
    <div class="col-md-7">
      <div class="card p-4 device-card" id="deviceInfoCard" style="display: none;">
        <h5 class="mb-3">üì± Detected Device Info</h5>
        <div class="row g-3">
          <div class="col-md-6">
            <div class="device-label">Browser:</div>
            <div class="device-value" id="browser"></div>
          </div>
          <div class="col-md-6">
            <div class="device-label">Operating System:</div>
            <div class="device-value" id="os"></div>
          </div>
          <div class="col-md-6">
            <div class="device-label">Platform:</div>
            <div class="device-value" id="pf"></div>
          </div>
          <div class="col-md-6">
            <div class="device-label">Device Type:</div>
            <div class="device-value" id="dt"></div>
          </div>
          <div class="col-md-6">
            <div class="device-label">Browser Language:</div>
            <div class="device-value" id="bl"></div>
          </div>
          <div class="col-md-6">
            <div class="device-label">Manufacturer:</div>
            <div class="device-value" id="dm"></div>
          </div>
          <div class="col-md-6">
            <div class="device-label">Model:</div>
            <div class="device-value" id="dm2"></div>
          </div>
          <div class="col-md-6">
            <div class="device-label">HW Version:</div>
            <div class="device-value" id="dhv"></div>
          </div>
          <div class="col-md-6">
            <div class="device-label">Bandwidth:</div>
            <div class="device-value" id="b"></div>
          </div>
          <div class="col-md-6">
            <div class="device-label">Carrier:</div>
            <div class="device-value" id="mc"></div>
          </div>
          <div class="col-md-6">
            <div class="device-label">OS Family:</div>
            <div class="device-value" id="of"></div>
          </div>
          <div class="col-md-6">
            <div class="device-label">Processed:</div>
            <div class="device-value" id="p"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- JS -->
<script>
  // G√°n user-agent m·∫∑c ƒë·ªãnh
  const currentUA = navigator.userAgent;
  document.getElementById("currentUA").textContent = currentUA;
  document.getElementById("uaInput").value = currentUA;

  // H√†m m√¥ ph·ªèng API detect (thay b·∫±ng call th·ª±c t·∫ø n·∫øu c√≥)
  function detectDevice() {
    const ua = document.getElementById("uaInput").value;

    // Gi·∫£ l·∫≠p response t·ª´ API theo model ContainerDevice
    const mockResponse = {
      browser: 101,
      operating_system: 203,
      platform: 1,
      device_type: 2,
      browser_language: navigator.language || "en-US",
      device_manufacturer: "Apple",
      device_model: "MacBook Pro",
      device_hardware_version: "M1",
      bandwidth: 100,
      mobile_carrier: "N/A",
      os_family: "macOS",
      processed: true
    };

    // G√°n l√™n UI
    for (const [key, val] of Object.entries(mockResponse)) {
      const el = document.getElementById(key === "operating_system" ? "os" : key === "device_type" ? "dt" : key === "device_model" ? "dm2" : key === "device_manufacturer" ? "dm" : key);
      if (el) el.textContent = val;
    }

    document.getElementById("deviceInfoCard").style.display = "block";

    // Th√™m v√†o history
    const li = document.createElement("li");
    li.className = "list-group-item small";
    li.textContent = ua.slice(0, 50) + (ua.length > 50 ? "..." : "");
    document.getElementById("historyList").prepend(li);
  }

  // T√¨m ki·∫øm trong danh s√°ch
  document.getElementById("searchBox").addEventListener("input", function () {
    const filter = this.value.toLowerCase();
    const items = document.querySelectorAll("#historyList li");
    items.forEach(item => {
      item.style.display = item.textContent.toLowerCase().includes(filter) ? "" : "none";
    });
  });
</script>
</body>
</html>
